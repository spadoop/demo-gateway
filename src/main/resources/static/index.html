<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="jquery-3.1.1.min.js" type="text/javascript">
	
</script>
<script>
	
</script>
</head>
<body>
		<!--<input type="submit" value="getData"/> -->
		<canvas width="400px" height="400px" id="cvs"> </canvas>
		<input type="button" value="start" onclick="startup()" />

		<input type="button" value="stop" onclick="clearCanvas()" />
		<script>
			var cvs = document.getElementById("cvs");
			var ctx = cvs.getContext("2d");

			function draw(px, py, x, y) {
				ctx.fillStyle = "#000000";
				//ctx.beginPath();
				ctx.fillRect(px, py, x, y);
				//ctx.closePath();
			}

			function getPacket() {

				$.ajax({
					url : "/demo/FetchData",
					type : "get",
					success : function(result) {
						result = eval('(' + result + ')');
						$.each(result, function(i, o) {
							draw(o.px_, o.py_, o.x_, o.y_);
						});
					},
				})
			}
			function drawRange() {
				ctx.fillStyle = "rgba(255,255,255,0.05)";
				ctx.fillRect(0, 0, 400, 400);
				getPacket();

			}
			var A;
			var running = false;
			function startup() {
				if (running == false) {
					update();
					running = true;
				} 
			}
			function update() {
				drawRange();
				A = setTimeout(update, 50);
			}
			function clearCanvas() {
				clearTimeout(A);
				ctx.clearRect(0, 0, 400, 400);
				running =false;
			}
		</script>

</body>
</html>